<!DOCTYPE html>
<html>
  <!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Meditations on a Class Method | AppSource Inc</title>
  <meta name="author" content="AppSource Inc.">

  
  <meta name="description" content="Meditations on a Class Method Sep 3, 2014 I keep a file of code I like. When looking for inspiration, I read through the file. It’s short; I often &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.appsource.biz/blog/2014/09/03/meditations-on-a-class-method">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="AppSource Inc" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

  <body>
    <section id="back-to-home">
  <div class="container">
    <div class="row">
      <a href="/">
        BACK TO HOME
      </a>
    </div>
  </div>
</section>

<section id="top-margin">
  <div class="top-yellow"></div>
  <div class="top-orange"></div>
  <div class="top-blue"></div>
  <div class="top-green"></div>
  <div class="top-yellow"></div>
  <div class="top-orange"></div>
  <div class="top-blue"></div>
  <div class="top-green"></div>
  <div class="top-yellow"></div>
  <div class="top-orange"></div>
</section>

<section id="blog-header">
  <div class="container">
    <div class="row">
      <a href="/blog">
        <img src="/images/blog.png" class="blog-logo"/>
      </a>
      <p>We love keeping you informed of the latest trend in the tech industry.</p>
    </div>
  </div>
</section>


    <section id="blog-content">
      <div class="container">
        <div class="row">

          <div class="col-sm-2 left-side-bar">
            <div class='author-info'>
  <img src='/images/nad.jpg' class='author-avatar'>
  <p>posted by</p>
  <p class='author'>Nad Flores</p>
</div>
<div class='feature-categories'>
  <p>Featured Posts</p>
  
  <p>good code</p>
  
  <p>ruby</p>
  
</div>

            
              <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.appsource.biz/blog/2014/09/03/meditations-on-a-class-method/" data-via="" data-counturl="http://www.appsource.biz/blog/2014/09/03/meditations-on-a-class-method/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>


            
          </div>

          <div class="col-sm-7">
            <div class="post">
  
  <header class="post-header">
    <h1 class="post-title">Meditations on a Class Method</h1>
    <p class="post-meta">Sep 3, 2014</p>
  </header>

  <article class="post-content">
    <p>I keep a file of code I like. When looking for inspiration, I read through the file. It’s short; I often re-write the samples to be nothing but the minimally inspiring thought.</p>

<!--more-->


<p>Here is the first snippet:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class='line'>  <span class="kp">new</span><span class="p">(</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">run</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Think on it for yourself before I explain what it means to me. I’d like to hear what it means to you — leave a long comment here before you keep reading.</p>

<p>To me, it’s a reminder of how to write a beautiful class method: instantiate the class then call a method on the instance.</p>

<p>Look at it from the perspective of the person calling the class method. When you call a class method you want one of two things: either you want to construct an instance of the class itself (<code>.new</code>, or perhaps <code>.new_from_file</code>, <code>.new_for_widescreen</code>, and <code>.new_from_json</code>), or you want convenience.</p>

<p>Think of the class methods you’ve seen, or have written. If they are not in the above style, they might look more like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">ImageUploader</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="vc">@@dimensions</span> <span class="o">=</span> <span class="n">geometry_for</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="vc">@@color_palette</span> <span class="o">=</span> <span class="n">colors_for</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="n">svg</span> <span class="o">=</span> <span class="n">generate_svg</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">geometry_for</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># ...</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">colors_for</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># ...</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">generate_svg</span><span class="p">(</span><span class="n">xpm</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># ...</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>What a mess of an object. An abuse of the singleton pattern, where it wasn’t even intended. Class variables being used in an especially not-thread-safe way, plus a jumble of code that is all exposed. It is daunting to extend because it is a tricky thought process to understand the full implications of even using it.</p>

<p>When dealing with an object you want a small interface. As a user you want the fewest number of options, and the one with the best abstraction; as a developer you want to hide as much of the implementation as possible, giving you full freedom to change the internals. The best object is one with no exposed methods at all.</p>

<p>The above pattern gives you that. You call .run and pass a user, and it takes care of the rest. If the default constructor changes its arity, the instance method (#run) changes its name, or the object is re-written in C and needs to do pointer arithmetic first: you are protected.</p>

<p>The snippet has explicit names for things: run and user. This brings to mind the command pattern, and especially a command pattern for dealing with users. Perhaps something to kick off the backend signup process. The command pattern is a quick way to start reducing a god class (PDF); pushing various bits of User into the SignUp class will help simplify both.</p>

<p>The simplicity of the snippet is a reminder to use abstractions on the same “level”. Create an instance and call a method on that; perhaps in the instance’s #run method, it will instantiate a few more objects and call a method on those; and so on. Short methods all the way down, explained with clear but concise names.</p>

<p>This snippet happens to be in Ruby, an inspiration unto itself. A part of the power behind the command pattern is in Ruby’s duck typing. Let’s say this is a class method on SignUp. I know that I can pass SignUp itself to something that expects to call run, passing a user. In doing so, I know that I can fake it in a test with any object that responds to run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">FakeSignup</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">should_succeed</span> <span class="o">=</span> <span class="kp">true</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@should_succeed</span> <span class="o">=</span> <span class="n">should_succeed</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class='line'>    <span class="k">unless</span> <span class="vi">@should_succeed</span>
</span><span class='line'>      <span class="k">raise</span> <span class="s2">&quot;I am supposed to fail&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>The idea of passing SignUp around makes me think of queues: you can add the SignUp class to a background job runner to get an asynchronous workflow from within Rails. You could spawn a co-routine, passing SignUp and a user object. Once you’ve been inspired by the snippet, a world of concurrency opens up.</p>

<p>So that’s what I think of when I see my first snippet from my collection of inspirational code. What do you see?</p>

  </article>
  
    <section>
  <h1>Comments</h1>
  <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = "appsource"; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



  
</div>


          </div>

          <div class="col-sm-3 hidden-xs right-side-bar">
            <h1>AppSource Inc.</h1>
<p>AppSource is a company borne out of a passion for technology and an inherent aptitude for business. I.T. may be our core competency, but our knowledge in business helps us identify the best ways to serve our clients. With a staff of highly qualified individuals, versed in the latest technology, our company is prepared to take on any challenge, big or small.</p>

<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/good-code/'>good code (1)</a></li>
<li class='category'><a href='/blog/categories/rails/'>rails (1)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>ruby (3)</a></li>

  </ul>
</section>



          </div>

        </div>
      </div>
    </section>
    <section id="footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-4">
        <div class="footer-get">
          <h1>Get &nbsp;in &nbsp;Touch</h1>
          <a href="https://maps.google.com/maps?f=d&amp;source=s_q&amp;hl=en&amp;geocode=%3BCQlbFE2_0HmAFcWd3gAdVjo3BynvWuncGciXMzHNRBAqjIqGSA&amp;q=Appsource+Inc.,+Metro+Manila,+Philippines&amp;aq=0&amp;oq=appsource&amp;sll=14.589434,121.060029&amp;sspn=0.003104,0.006105&amp;ie=UTF8&amp;hq=Appsource+Inc.,+Metro+Manila,+Philippines&amp;hnear=&amp;radius=15000&amp;t=m&amp;z=13&amp;vpsrc=0&amp;iwloc=A&amp;daddr=Appsource+Inc.,+Unit+1401,+Robinsons+Equitable+Tower,+ADB+Avenue+corner+Poveda+Road,+Ortigas+Center+1605,+Philippines">
            <img class="block" id="u1511_img" src="/images/map.jpg" alt="">
          </a>
          <p>
            Unit 601 & 603 Tower B, BSA Twin Towers,<br>
            Bank Drive, Ortigas Centre,<br>
            Mandaluyong City 1550 Philippines<br>
            Office Hours 9:00 AM - 5:00 PM
          </p>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="footer-call">
          <h1>Call &nbsp;Us</h1>
          <p>
            Telefax: (02) 477 APPS<br>
            <img src="/images/mobile.png" alt="" width="9" height="15">&nbsp;&nbsp; Mobile: +63 917 839-APPS
          </p>
        </div>
        <div class="footer-email">
          <h1>Email &nbsp;Us</h1>
          <p>
            For Information: <a href="mailto:info@appsource.biz">info@appsource.biz</a><br>
            For Job Applications: <a href="mailto:join@appsource.biz">join@appsource.biz</a><br>
            For Technical Support: <a href="mailto:support@appsource.biz">support@appsource.biz</a><br>
            For Billing Concerns: <a href="mailto:billing@appsource.biz">billing@appsource.biz</a><br>
            Managing Director: <a href="mailto:mcantero@appsource.biz">mcantero@appsource.biz</a>
          </p>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="footer-work">
          <h1>Work &nbsp;with &nbsp;Us</h1>

          <form action="http://getsimpleform.com/messages?form_api_token=8b4160fbad5bb0ae7e3167e5bc085acf" method="post">
            <div class="form-group">
              <input name='full_name' type="text" class="form-control" id="exampleInputEmail2" placeholder="Name" required>
            </div>
            <div class="form-group">
              <input name='email' type="email" class="form-control" id="exampleInputEmail2" placeholder="Email" required>
            </div>
            <div class="form-group">
              <input name='subject' type="text" class="form-control" id="exampleInputEmail2" placeholder="Subject">
            </div>
            <div class="form-group">
              <textarea name='message' placeholder="Message" style="width: 100%;" required></textarea>
            </div>
            <div class="form-group">
              <button type="submit" class="send col-xs-12">Send Message</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>


  </body>
</html>

